{% extends "base.html" %}

{% block title %}Bot Traffic Analysis{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto px-4 py-6 space-y-6">
  {% include "header.html" %}
  {% include "navigation.html" %}
  
  <!-- Bot Traffic Section -->
  {% include "bot_traffic.html" %}
  
  <!-- Bot Traffic Radar Section -->
  {% include "bot_traffic_radar.html" %}
  
  <!-- Back to Dashboard -->
  <div class="text-center">
    <a href="/" class="inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
      ‚Üê Back to Dashboard
    </a>
  </div>
</div>
{% endblock %}

{% block scripts %}
{% include "scripts.html" %}
<script>
document.addEventListener('DOMContentLoaded', function() {
  // Load only bot-related data
  loadEvents().then(events => {
    if (events.length > 0) {
      const currentEvent = events[0];
      loadBotTraffic(currentEvent);
    }
  });
});

async function loadEvents() {
  try {
    const data = await fetch('/api/events').then(r => r.json());
    return data.events || data || [];
  } catch (e) {
    console.error('Error loading events:', e);
    return [];
  }
}
</script>
{% endblock %}
